# n8n-nodes-jimengai

[![English](https://img.shields.io/badge/English-Click-yellow)](README.md)
[![中文文档](https://img.shields.io/badge/中文文档-点击查看-orange)](README-zh.md)

> 将即梦图像/视频生成能力无缝接入 n8n，实现可视化 AI 内容创作工作流。

---

### 🧩 插件简介

`n8n-nodes-jimengai` 是一个基于即梦的 n8n 插件，支持 **图片生成** 与 **视频生成** 两个核心操作节点，允许用户通过流程化自动化方式，完成高质量的 AIGC 图像/视频创作任务。

[n8n](https://n8n.io/) 是一个[公平代码许可](https://docs.n8n.io/reference/license/)的工作流自动化平台。

[快速开始](#快速开始)  
[核心功能](#核心功能)  
[适用场景](#适用场景)  
[鉴权方式](#鉴权方式)  
[兼容性](#兼容性)  
[资源](#资源)  

## 快速开始

1. 在 n8n 中安装插件：

   ```bash
   npm install n8n-nodes-jimengai
   ```

2. 在编辑器中拖入 "Jimeng" 节点。

3. 选择资源类型：
   - **Image**：图片生成（文生图2.1/3.0/3.1、图生图3.0）
   - **Video**：视频生成（文生视频、图生视频、动作模仿等）

4. 选择具体操作：
   - 图片生成：文生图2.1、文生图3.0、文生图3.1、图生图3.0
   - 视频生成：文生视频720P/1080P、图生视频720P/1080P、动作模仿等

5. 配置认证信息：
   - AccessKeyID
   - SecretAccessKey
   - Region（区域）

6. 填入参数，开始生成。

7. 可配合其他节点（如：OpenAI、Notion、Telegram、Drive 等）构建完整自动化流程。

## 核心功能

### ✨ 图片生成（Image Generation）
- **文生图2.1**：基于文本描述生成高质量图像
- **文生图3.0**：使用即梦3.0模型进行文本到图像生成
- **文生图3.1**：使用即梦3.1模型进行文本到图像生成
- **图生图3.0**：基于现有图像和文本提示生成新图像
- **状态查询**：实时查询图像生成任务状态
- **多模型支持**：jimeng-2.1, jimeng-3.0, jimeng-3.1
- **灵活尺寸**：支持多种宽高比（21:9, 16:9, 3:2, 4:3, 1:1, 3:4, 2:3, 9:16）
- **异步处理**：可选择等待生成完成或异步处理

### 🎬 视频生成（Video Generation）
- **文生视频720P**：通过文本描述生成720P视频
- **文生视频1080P**：通过文本描述生成1080P视频
- **图生视频720P-首帧**：基于图像首帧生成720P视频
- **图生视频720P-首尾帧**：基于图像首尾帧生成720P视频
- **图生视频720P-运镜**：基于图像和运镜效果生成720P视频
- **图生视频1080P-首帧**：基于图像首帧生成1080P视频
- **图生视频1080P-首尾帧**：基于图像首尾帧生成1080P视频
- **视频生成3.0 Pro**：使用Pro模型生成高质量视频
- **动作模仿**：基于参考视频进行动作模仿生成
- **状态查询**：实时查询视频生成任务状态
- **灵活参数**：支持多种宽高比和时长设置（1-10秒）
- **异步处理**：可选择等待生成完成或异步处理

## 已实现的API接口

### 📸 图片生成接口（4个）
| 接口名称 | 文件路径 | 模型版本 | 功能描述 |
|---------|---------|---------|---------|
| 文生图2.1 | `TextToImageOperate.ts` | jimeng-2.1 | 根据文本描述生成高质量图像 |
| 文生图3.0 | `TextToImage30Operate.ts` | jimeng-3.0 | 使用3.0模型进行文本到图像生成 |
| 文生图3.1 | `TextToImage31Operate.ts` | jimeng-3.1 | 使用3.1模型进行文本到图像生成 |
| 图生图3.0 | `ImageToImageOperate.ts` | jimeng-3.0 | 基于现有图像和文本提示生成新图像 |

### 🎬 视频生成接口（9个）
| 接口名称 | 文件路径 | 模型版本 | 功能描述 |
|---------|---------|---------|---------|
| 文生视频720P | `TextToVideo720POperate.ts` | video-3.0-720p | 根据文本描述生成720P视频 |
| 文生视频1080P | `TextToVideo1080POperate.ts` | video-3.0-1080p | 根据文本描述生成1080P视频 |
| 图生视频720P-首帧 | `ImageToVideo720PFirstFrameOperate.ts` | video-3.0-720p | 基于图像首帧生成720P视频 |
| 图生视频720P-首尾帧 | `ImageToVideo720PFirstLastFrameOperate.ts` | video-3.0-720p | 基于图像首尾帧生成720P视频 |
| 图生视频720P-运镜 | `ImageToVideo720PCameraMotionOperate.ts` | video-3.0-720p | 基于图像和运镜效果生成720P视频 |
| 图生视频1080P-首帧 | `ImageToVideo1080PFirstFrameOperate.ts` | video-3.0-1080p | 基于图像首帧生成1080P视频 |
| 图生视频1080P-首尾帧 | `ImageToVideo1080PFirstLastFrameOperate.ts` | video-3.0-1080p | 基于图像首尾帧生成1080P视频 |
| 视频生成3.0 Pro | `VideoGeneration30ProOperate.ts` | video-3.0-pro | 使用Pro模型生成高质量视频 |
| 动作模仿 | `ActionImitationOperate.ts` | action-imitation | 基于参考视频进行动作模仿生成 |

### 📊 状态查询接口（2个）
| 接口名称 | 文件路径 | 功能描述 |
|---------|---------|---------|
| 获取图像状态 | `GetImageStatusOperate.ts` | 查询图像生成任务状态 |
| 获取视频状态 | `GetVideoStatusOperate.ts` | 查询视频生成任务状态 |

## 功能特性

### 🎯 核心操作
| 功能类型 | 操作名称 | 描述 | 支持模型 |
|---------|---------|------|---------|
| **图像生成** | 文生图2.1 | 根据文本描述生成图像 | jimeng-2.1 |
| | 文生图3.0 | 使用3.0模型进行文本到图像生成 | jimeng-3.0 |
| | 文生图3.1 | 使用3.1模型进行文本到图像生成 | jimeng-3.1 |
| | 图生图3.0 | 基于现有图像和文本提示生成新图像 | jimeng-3.0 |
| | 获取图像状态 | 查询图像生成任务状态 | - |
| **视频生成** | 文生视频720P | 根据文本描述生成720P视频 | video-3.0-720p |
| | 文生视频1080P | 根据文本描述生成1080P视频 | video-3.0-1080p |
| | 图生视频720P-首帧 | 基于图像首帧生成720P视频 | video-3.0-720p |
| | 图生视频720P-首尾帧 | 基于图像首尾帧生成720P视频 | video-3.0-720p |
| | 图生视频720P-运镜 | 基于图像和运镜效果生成720P视频 | video-3.0-720p |
| | 图生视频1080P-首帧 | 基于图像首帧生成1080P视频 | video-3.0-1080p |
| | 图生视频1080P-首尾帧 | 基于图像首尾帧生成1080P视频 | video-3.0-1080p |
| | 视频生成3.0 Pro | 使用Pro模型生成高质量视频 | video-3.0-pro |
| | 动作模仿 | 基于参考视频进行动作模仿生成 | action-imitation |
| | 获取视频状态 | 查询视频生成任务状态 | - |

### ⚙️ 参数配置
- **图像尺寸**：支持自定义宽度和高度，多种宽高比（21:9, 16:9, 3:2, 4:3, 1:1, 3:4, 2:3, 9:16）
- **视频时长**：1-10秒可调（根据模型支持）
- **视频分辨率**：720P、1080P、自定义分辨率（Pro模型）
- **图像风格**：动漫、油画、写实、素描、水彩等
- **运镜效果**：平移、倾斜、缩放等多种运镜方式
- **生成参数**：步数、引导比例、随机种子等
- **生成模式**：同步等待或异步处理
- **模型选择**：多种即梦AI模型可选

## 适用场景

### 🧠 AIGC 内容创作
- **自动化内容生产**：批量生成图文日报、资讯内容
- **营销素材制作**：自动创作营销图/短视频工作流
- **创意内容制作**：AIGC 创意剧本 + 分镜 + 视频一体化解决方案
- **电商应用**：产品图自动生成（结合商品描述和参数）

### 🔄 工作流集成
- **多平台发布**：结合 Telegram、Discord 等节点实现自动发布
- **数据驱动**：结合 Notion、Airtable 等数据源节点
- **条件判断**：结合 IF 节点实现智能内容筛选
- **定时触发**：结合 Cron 节点实现定时内容生成

## 技术架构

### 🏗️ 模块化设计
- **资源构建器**：`ResourceBuilder` 动态加载图像和视频资源模块
- **API客户端**：`JimengApiClient` 封装即梦API交互逻辑
- **操作模块**：独立的图像/视频操作实现，支持扩展
- **工具类**：模块加载、节点工具、请求工具等辅助功能

### 🔧 核心特性
- **类型安全**：完整的 TypeScript 类型定义
- **错误处理**：完善的错误处理和日志记录机制
- **异步支持**：支持同步和异步生成模式
- **状态管理**：实时任务状态查询和监控

## 鉴权方式

### 🔐 使用即梦 API 认证信息

本插件通过即梦API的 `AccessKeyID` 和 `SecretAccessKey` 实现鉴权。

#### ✅ 获取认证信息方法：

1. 访问 [即梦官网](https://jimeng.jianying.com/) 并登录账号；
2. 进入API管理页面，创建或获取API密钥；
3. 复制 `AccessKeyID` 和 `SecretAccessKey` 值；
4. 在 n8n 节点配置中填入认证信息，即可完成授权。

#### 🔒 安全说明
- 请妥善保管您的认证信息，避免泄露
- 建议定期轮换API密钥以确保安全
- 建议在测试环境中先验证认证有效性
- 认证信息具有时效性，需要定期更新

## 兼容性

- **最低n8n版本**: 1.0.0
- **Node.js版本**: >=22.16
- **测试版本**: n8n 1.0.0+

## 资源

* [n8n社区节点文档](https://docs.n8n.io/integrations/#community-nodes)
* [即梦官网](https://jimeng.jianying.com/)
* [n8n工作流模板](https://github.com/crazyyanchao/n8n-workflow-template)

---

**注意**: 使用此节点需要有效的即梦账户和相应的API权限。请确保遵守即梦的使用条款和API调用限制。
